// ----------------------------------------------------------------------------
// markItUp! Universal MarkUp Engine, JQuery plugin
// v 1.1.7
// Dual licensed under the MIT and GPL licenses.
// ----------------------------------------------------------------------------
// Copyright (C) 2007-2010 Jay Salvat
// http://markitup.jaysalvat.com/
// ----------------------------------------------------------------------------
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(4($){$.29.Y=4(11,2p){B 3,q,z,H;q=z=H=l;3={E:\'\',17:\'\',14:\'\',1q:\'\',1N:c,2d:\'2k\',1n:\'~/3u/1J.1I\',1e:\'\',2l:\'K\',1A:c,1C:\'\',25:\'\',24:{},23:{},1Y:{},1R:{},1m:[{}]};$.15(3,11,2p);2(!3.14){$(\'3e\').1i(4(a,2i){1H=$(2i).18(0).3p.2Z(/(.*)3D\\.3L(\\.2W)?\\.2X$/);2(1H!==27){3.14=1H[1]}})}7 I.1i(4(){B $$,p,1b,16,m,L,N,T,X,1u,u,2Q,O,1a;$$=$(I);p=I;1b=[];1a=l;16=m=0;L=-1;3.1e=1g(3.1e);3.1n=1g(3.1n);4 1g(K,2j){2(2j){7 K.W(/("|\')~\\//g,"$1"+3.14)}7 K.W(/^~\\//,3.14)}4 2n(){E=\'\';17=\'\';2(3.E){E=\'E="\'+3.E+\'"\'}d 2($$.1G("E")){E=\'E="Y\'+($$.1G("E").2A(0,1).3c())+($$.1G("E").2A(1))+\'"\'}2(3.17){17=\'P="\'+3.17+\'"\'}$$.1E(\'<v \'+17+\'></v>\');$$.1E(\'<v \'+E+\' P="Y"></v>\');$$.1E(\'<v P="3C"></v>\');$$.2e("2f");X=$(\'<v P="3R"></v>\').2h($$);$(1K(3.1m)).1L(X);1u=$(\'<v P="31"></v>\').1S($$);2(3.1A===c&&$.Z.3f!==c){1A=$(\'<v P="3i"></v>\').1S($$).1k("1F",4(e){B h=$$.2q(),y=e.2r,1s,1t;1s=4(e){$$.2S("2q",36.39(20,e.2r+h-y)+"3b");7 l};1t=4(e){$("1I").1M("28",1s).1M("2o",1t);7 l};$("1I").1k("28",1s).1k("2o",1t)});1u.2b(1A)}$$.2c(1P).3A(1P);$$.1k("1D",4(e,11){2(11.1l!==l){18()}2(p===$.Y.2g){12(11)}});$$.1j(4(){$.Y.2g=I})}4 1K(1m){B w=$(\'<w></w>\'),i=0;$(\'C:2m > w\',w).2S(\'37\',\'k\');$.1i(1m,4(){B o=I,t=\'\',1o,C,j;1o=(o.19)?(o.1W||\'\')+\' [3k+\'+o.19+\']\':(o.1W||\'\');19=(o.19)?\'2t="\'+o.19+\'"\':\'\';2(o.2u){C=$(\'<C P="3z">\'+(o.2u||\'\')+\'</C>\').1L(w)}d{i++;2x(j=1b.8-1;j>=0;j--){t+=1b[j]+"-"}C=$(\'<C P="2C 2C\'+t+(i)+\' \'+(o.3F||\'\')+\'"><a 3H="" \'+19+\' 1o="\'+1o+\'">\'+(o.1W||\'\')+\'</a></C>\').1k("3I",4(){7 l}).2E(4(){7 l}).1F(4(){2(o.2F){3S(o.2F)()}2P(4(){12(o)},1);$(\'w w\',X).1Z();7 l}).2m(4(){$(\'> w\',I).2Y();$(D).30(\'2E\',4(){$(\'w w\',X).1Z()})},4(){$(\'> w\',I).1Z()}).1L(w);2(o.2T){1b.32(i);$(C).2e(\'33\').2b(1K(o.2T))}}});1b.35();7 w}4 2U(6){2(6){6=6.38();6=6.W(/\\(\\!\\(([\\s\\S]*?)\\)\\!\\)/g,4(x,a){B b=a.26(\'|!|\');2(H===c){7(b[1]!==2a)?b[1]:b[0]}d{7(b[1]===2a)?"":b[0]}});6=6.W(/\\[\\!\\[([\\s\\S]*?)\\]\\!\\]/g,4(x,a){B b=a.26(\':!:\');2(1a===c){7 l}1B=3j(b[0],(b[1])?b[1]:\'\');2(1B===27){1a=c}7 1B});7 6}7""}4 M(1f){2($.3t(1f)){1f=1f(T)}7 2U(1f)}4 1d(6){J=M(N.J);1c=M(N.1c);R=M(N.R);Q=M(N.Q);2(R!==""){k=J+R+Q}d 2(f===\'\'&&1c!==\'\'){k=J+1c+Q}d{k=J+(6||f)+Q}7{k:k,J:J,R:R,1c:1c,Q:Q}}4 12(o){B A,j,n,i;T=N=o;18();$.15(T,{1p:"",14:3.14,p:p,f:(f||\'\'),m:m,q:q,z:z,H:H});M(3.1C);M(N.1C);2(q===c&&z===c){M(N.3M)}$.15(T,{1p:1});2(q===c&&z===c){U=f.26(/\\r?\\n/);2x(j=0,n=U.8,i=0;i<n;i++){2($.3U(U[i])!==\'\'){$.15(T,{1p:++j,f:U[i]});U[i]=1d(U[i]).k}d{U[i]=""}}6={k:U.3X(\'\\n\')};G=m;A=6.k.8+(($.Z.1O)?n:0)}d 2(q===c){6=1d(f);G=m+6.J.8;A=6.k.8-6.J.8-6.Q.8;A-=1r(6.k)}d 2(z===c){6=1d(f);G=m;A=6.k.8;A-=1r(6.k)}d{6=1d(f);G=m+6.k.8;A=0;G-=1r(6.k)}2((f===\'\'&&6.R===\'\')){L+=1Q(6.k);G=m+6.J.8;A=6.k.8-6.J.8-6.Q.8;L=$$.F().1h(m,$$.F().8).8;L-=1Q($$.F().1h(0,m))}$.15(T,{m:m,16:16});2(6.k!==f&&1a===l){2s(6.k);1T(G,A)}d{L=-1}18();$.15(T,{1p:\'\',f:f});2(q===c&&z===c){M(N.34)}M(N.25);M(3.25);2(u&&3.1N){1U()}z=H=q=1a=l}4 1Q(6){2($.Z.1O){7 6.8-6.W(/\\n*/g,\'\').8}7 0}4 1r(6){2($.Z.2v){7 6.8-6.W(/\\r*/g,\'\').8}7 0}4 2s(k){2(D.f){B 2w=D.f.1V();2w.2y=k}d{$$.F($$.F().1h(0,m)+k+$$.F().1h(m+f.8,$$.F().8))}}4 1T(G,A){2(p.2z){2($.Z.1O&&$.Z.3a>=9.5&&A==0){7 l}V=p.2z();V.3d(c);V.2B(\'1X\',G);V.3g(\'1X\',A);V.3h()}d 2(p.2D){p.2D(G,G+A)}p.1v=16;p.1j()}4 18(){p.1j();16=p.1v;2(D.f){f=D.f.1V().2y;2($.Z.2v){B V=D.f.1V(),1w=V.3l();1w.3m(p);m=-1;3n(1w.3o(V)){1w.2B(\'1X\');m++}}d{m=p.2G}}d{m=p.2G;f=$$.F().1h(m,p.3q)}7 f}4 1J(){2(!u||u.3r){2(3.1q){u=3s.2H(\'\',\'1J\',3.1q)}d{O=$(\'<2I P="3v"></2I>\');2(3.2d==\'2k\'){O.1S(1u)}d{O.2h(X)}u=O[O.8-1].3w||3x[O.8-1]}}d 2(H===c){2(O){O.3y()}d{u.2J()}u=O=l}2(!3.1N){1U()}}4 1U(){2K()}4 2K(){B 3B;2(3.1e!==\'\'){$.2L({2M:\'3E\',2N:3.1e,K:3.2l+\'=\'+3G($$.F()),2O:4(K){21(1g(K,1))}})}d{2(!2Q){$.2L({2N:3.1n,2O:4(K){21(1g(K,1).W(/<!-- 3J -->/g,$$.F()))}})}}7 l}4 21(K){2(u.D){3K{22=u.D.2R.1v}3N(e){22=0}u.D.2H();u.D.3O(K);u.D.2J();u.D.2R.1v=22}2(3.1q){u.1j()}}4 1P(e){z=e.z;H=e.H;q=(!(e.H&&e.q))?e.q:l;2(e.2M===\'2c\'){2(q===c){C=$("a[2t="+3P.3Q(e.1x)+"]",X).1y(\'C\');2(C.8!==0){q=l;2P(4(){C.3T(\'1F\')},1);7 l}}2(e.1x===13||e.1x===10){2(q===c){q=l;12(3.1Y);7 3.1Y.1z}d 2(z===c){z=l;12(3.23);7 3.23.1z}d{12(3.24);7 3.24.1z}}2(e.1x===9){2(z==c||q==c||H==c){7 l}2(L!==-1){18();L=$$.F().8-L;1T(L,0);L=-1;7 l}d{12(3.1R);7 3.1R.1z}}}}2n()})};$.29.3V=4(){7 I.1i(4(){B $$=$(I).1M().3W(\'2f\');$$.1y(\'v\').1y(\'v.Y\').1y(\'v\').R($$)})};$.Y=4(11){B 3={1l:l};$.15(3,11);2(3.1l){7 $(3.1l).1i(4(){$(I).1j();$(I).2V(\'1D\',[3])})}d{$(\'p\').2V(\'1D\',[3])}}})(3Y);',62,247,'||if|options|function||string|return|length||||true|else||selection|||||block|false|caretPosition||button|textarea|ctrlKey||||previewWindow|div|ul|||shiftKey|len|var|li|document|id|val|BBstart|altKey|this|openWith|data|caretOffset|prepare|clicked|iFrame|class|closeWith|replaceWith||hash|lines|range|replace|header|markItUp|browser||settings|markup||root|extend|scrollPosition|nameSpace|get|key|abort|levels|placeHolder|build|previewParserPath|action|localize|substring|each|focus|bind|target|markupSet|previewTemplatePath|title|line|previewInWindow|fixIeBug|mouseMove|mouseUp|footer|scrollTop|rangeCopy|keyCode|parent|keepDefault|resizeHandle|value|beforeInsert|insertion|wrap|mousedown|attr|miuScript|html|preview|dropMenus|appendTo|unbind|previewAutoRefresh|opera|keyPressed|fixOperaBug|onTab|insertAfter|set|refreshPreview|createRange|name|character|onCtrlEnter|hide||writeInPreview|sp|onShiftEnter|onEnter|afterInsert|split|null|mousemove|fn|undefined|append|keydown|previewPosition|addClass|markItUpEditor|focused|insertBefore|tag|inText|after|previewParserVar|hover|init|mouseup|extraSettings|height|clientY|insert|accesskey|separator|msie|newSelection|for|text|createTextRange|substr|moveStart|markItUpButton|setSelectionRange|click|call|selectionStart|open|iframe|close|renderPreview|ajax|type|url|success|setTimeout|template|documentElement|css|dropMenu|magicMarkups|trigger|pack|js|show|match|one|markItUpFooter|push|markItUpDropMenu|afterMultiInsert|pop|Math|display|toString|max|version|px|toUpperCase|collapse|script|safari|moveEnd|select|markItUpResizeHandle|prompt|Ctrl|duplicate|moveToElementText|while|inRange|src|selectionEnd|closed|window|isFunction|templates|markItUpPreviewFrame|contentWindow|frame|remove|markItUpSeparator|keyup|phtml|markItUpContainer|jquery|POST|className|encodeURIComponent|href|contextmenu|content|try|markitup|beforeMultiInsert|catch|write|String|fromCharCode|markItUpHeader|eval|triggerHandler|trim|markItUpRemove|removeClass|join|jQuery'.split('|'),0,{}))

